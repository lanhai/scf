(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bc43025e"],{"5ebc":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{directives:[{name:"title",rawName:"v-title"}],staticClass:"api",attrs:{"data-title":"接口文档"}},[a("css",{attrs:{href:"//at.alicdn.com/t/font_1896021_aem2yk1526s.css"}}),a("el-header",{staticClass:"api-header"},[a("el-col",{attrs:{span:24}},[a("h1",[e._v("\n                "+e._s(e.serviceName||"选择业务模块")+"\n            ")]),a("el-select",{staticClass:"fr",staticStyle:{top:"-30px"},attrs:{placeholder:"选择模块"},on:{change:e.selectModule},model:{value:e.service,callback:function(t){e.service=t},expression:"service"}},[a("template",{slot:"prefix"},[a("span",{class:{"el-icon-refresh":!e.isLoading,"el-icon-loading":e.isLoading},staticStyle:{margin:"10px 5px 10px",cursor:"pointer"},on:{click:function(t){return t.stopPropagation(),e.load(t)}}})]),e._l(e.app,(function(e){return a("el-option",{key:e.name,attrs:{label:e.cn_name||e.name,value:e.name}})}))],2)],1)],1),a("el-container",{staticStyle:{overflow:"auto"}},[a("el-aside",{staticClass:"api-aside",attrs:{width:"300px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"unique-opened":!0,"default-active":e.defaultActive,"default-openeds":e.openeds}},e._l(e.modules,(function(t,s){return a("el-submenu",{key:s,attrs:{index:(s+1).toString()}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-ali-dian"}),a("span",[e._v(e._s(t.desc))])]),a("el-menu-item-group",[a("template",{slot:"title"},[e._v("\n                            "+e._s(e.service)+"."+e._s(t.name)+"\n                        ")]),e._l(t.methods,(function(t,i){return a("el-menu-item",{key:i,attrs:{index:(s+1).toString()+"-"+(i+1).toString()},on:{click:function(a){return e.detail(t,s)}}},[e._v("\n                            "+e._s(t.name)+"\n                        ")])}))],2)],2)})),1)],1),e.api.name?e._e():a("el-main",[a("el-alert",{attrs:{title:"选择方法查看详情",type:"info",effect:"dark",closable:!1}})],1),e.api.name?a("el-main",[a("el-alert",{attrs:{title:"服务名称:"+e.debugModule.name+" 更新时间: "+e.api.updated+" by "+e.api.author,type:"info",effect:"dark","close-text":"刷新",closable:!1}}),a("div",{staticClass:"mt-20"},[a("el-row",{staticClass:"mt-20"},[a("span",[e._v("方法名称:")]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"description mt-15"},[a("b",[e._v(e._s(e.api.name))])])])],1),a("el-row",{staticClass:"mt-20"},[a("span",[e._v("方法说明:")]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"description mt-15",domProps:{innerHTML:e._s(e.api.desc)}})])],1),a("el-row",{staticClass:"mt-20"},[a("span",[e._v("参数说明:")]),a("el-divider"),a("el-col",{staticClass:"mt-10",attrs:{span:24}},[a("el-alert",{attrs:{title:"方法参数类型为非string时调试值填写数据json字符串","show-icon":"",closable:!1,type:"info"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.api.params,border:"","row-key":"key","default-expand-all":""}},[a("el-table-column",{attrs:{prop:"key",label:"参数名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[1===s.temp?a("el-input",{attrs:{placeholder:"参数名称",size:"medium"},model:{value:s.key,callback:function(t){e.$set(s,"key",t)},expression:"row.key"}}):e._e(),1!==s.temp?a("span",[e._v(e._s(s.key))]):e._e()]}}],null,!1,1980908585)}),a("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"}}),a("el-table-column",{attrs:{prop:"desc",label:"参数说明"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.default||"--"))])]}}],null,!1,3164662445)})],1)],1)],1),e.requestJsonData||e.responseJsonData?a("el-tabs",{staticClass:"mt-15",model:{value:e.activeResultTab,callback:function(t){e.activeResultTab=t},expression:"activeResultTab"}},[a("el-tab-pane",{attrs:{label:"响应数据",name:"request"}},[e.responseJsonData?a("el-col",{attrs:{span:24}},[a("div",{staticClass:"description"},[a("json-viewer",{attrs:{value:e.responseJsonData,"expand-depth":10,copyable:"",expanded:""}})],1)]):e._e()],1)],1):e._e()],1),a("div",{staticClass:"mt-20"},[a("span",[e._v("返回说明")]),a("el-divider"),a("el-alert",{attrs:{title:"方法标准输出格式,包含data,errCode,message,其中data字段数据类型可能是object/array/string/int其中的一种(float当做string返回)","show-icon":"",closable:!1,type:"info"}}),a("el-row",{staticClass:"mt-20"},[a("span",[e._v("返回数据:")]),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"description mt-15"},[e._v("\n                            "+e._s(e.api.return.data.type)+":"+e._s(e.api.return.data.desc)+"\n                        ")])]),e.api.return.data.fields?a("el-col",{attrs:{span:24}},[a("el-alert",{attrs:{title:"此字段说明为返回的data字段说明","show-icon":"",closable:!1,type:"info"}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.api.return.data.fields,border:"","row-key":"_index","default-expand-all":""}},[a("el-table-column",{attrs:{prop:"key",label:"字段名称",width:"350"}}),a("el-table-column",{attrs:{prop:"type",label:"字段类型",width:"180"}}),a("el-table-column",{attrs:{prop:"desc",label:"字段说明"}})],1)],1):e._e()],1)],1)],1):e._e()],1)],1)},i=[],n=(a("ac6a"),a("f3e2"),a("7f7f"),a("349e")),o=a.n(n),l=a("72eb"),r=a("f9bc"),c={name:"Api",components:{JsonViewer:o.a},data:function(){return{isLoading:!1,service:this.$route.query.service||"",serviceName:"",defaultActive:"1-1",modules:[],api:{params:[]},debugModule:"",responseJsonData:"",requestJsonData:"",activeResultTab:"request",activeParamsTab:"biz",openeds:[],requestHeader:{},project:{debug_appid:"",debug_appkey:"",debug_mpappid:"",debug_params:[{key:"appid",value:"{appid}",desc:"请求商户APPID"},{key:"mpappid",value:"{mpappid}",desc:"小程序appid,非小程序端可不传"},{key:"rand",value:"{rand}",desc:"随机字符串"},{key:"timestamp",value:"{timestamp}",desc:"请求时间戳"},{key:"sign",value:"{sign}",desc:"签名"},{key:"token",value:this.$cookie.get("ws_debug_token")||"",desc:"用户令牌"},{key:"sessionkey",value:this.$cookie.get("ws_debug_sessionkey")||"",desc:"小程序登录sessionkey"},{key:"client",value:this.$cookie.get("ws_debug_client")||"debug",desc:"客户端标识[ios;xiaomi;...]"},{key:"version",value:this.$cookie.get("ws_debug_version")||"1.0.1",desc:"客户端版本号"}]},app:[]}},watch:{service:function(){this.service&&this.getServiceName()}},mounted:function(){this.load()},methods:{load:function(){var e=this;this.$loading.show(),this.$request.get("/ws/document?action=init&mode=rpc").then((function(t){if(t.errCode)return e.$message.error(t.message);console.log(t.data),e.project.debug_appid=t.data.debug_appid,e.project.debug_appkey=t.data.debug_appkey,e.project.debug_mpappid=t.data.debug_mpappid,e.app=t.data.modules,e.gateway=t.data.gate_way,e.app.length&&(e.service=e.service||e.app[0].name,e.getDocument())})).catch((function(t){e.$message.error(t)})).finally((function(){e.$loading.close()}))},getDocument:function(){var e=this;if(!this.service)return this.$message.error("请传入模块参数");this.isLoading=!0,this.$request.get("/ws/document?action=document&module=".concat(this.service,"&mode=rpc")).then((function(t){if(t.errCode)return e.$message.alert(t.message);e.modules=t.data,e.modules.length&&e.detail(e.modules[0].methods[0],0)})).catch((function(t){e.$message.error(t)})).finally((function(){e.isLoading=!1}))},getServiceName:function(){var e=this;this.app.forEach((function(t){t.name===e.service&&(e.serviceName=t.cn_name||t.name)}))},selectModule:function(){this.getDocument()},beforeUpload:function(){},onChange:function(){},onProgress:function(){this.$loading.show("上传中")},onSuccess:function(e){if(this.$loading.close(),e.errCode)return this.$message.alert("文件上传失败:"+e.message);this.$message.success("文件上传成功"),this.responseJsonData=e},goBack:function(){},debug:function(){var e=this,t=[];this.api.params.length&&this.$copy(this.api.params).forEach((function(e){t.push(e.value)})),this.isLoading=!0;var a={service:this.debugModule.name,method:this.api.name,args:t};Object(l["a"])({url:"/admin/api/rpc/debug/",method:"post",headers:this.requestHeader,data:a}).then((function(t){e.responseJsonData=t})).catch((function(t){e.$message.error(t)})).finally((function(){e.isLoading=!1}))},detail:function(e,t){var a=this;if(this.api=this.$copy(e),this.debugModule=this.modules[t],this.api.updated=this.debugModule.updated,this.api.author=this.debugModule.author,this.requestJsonData=null,this.responseJsonData=null,this.api.params){var s=this.api.params;s.forEach((function(e,t){a.$set(a.api.params[t],"value",""),"array"===e.type&&a.$set(a.api.params[t],"value",["",""])}))}this.$nextTick((function(){a.scrollTop(document.querySelector(".el-main").scrollTop)}))},scrollTop:function(e){var t=this;setTimeout((function(){document.querySelector(".el-main").scrollTop=e,e-=20,e>0?t.scrollTop(e):e<0&&(document.querySelector(".el-main").scrollTop=0)}),1)},setIndex:function(e){var t=this;e.forEach((function(e){e._index=r["a"].rand(),e.children&&t.setIndex(e.children)}))}}},d=c,u=(a("f8d4"),a("2877")),p=Object(u["a"])(d,s,i,!1,null,null,null);t["default"]=p.exports},f72a:function(e,t,a){},f8d4:function(e,t,a){"use strict";var s=a("f72a"),i=a.n(s);i.a},f9bc:function(e,t,a){"use strict";var s=a("c1df"),i=a.n(s),n={rand:function(e){e=e||32;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",a=t.length,s="",i=0;i<e;i++)s+=t.charAt(Math.floor(Math.random()*a));return s},timestamp:function(){var e=new Date;return Math.floor(i()(e).valueOf()/1e3)}};t["a"]=n}}]);
//# sourceMappingURL=chunk-bc43025e.243a8839.js.map