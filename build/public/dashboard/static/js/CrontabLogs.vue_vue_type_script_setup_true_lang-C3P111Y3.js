/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-11-05 21:04:18 
 */
import{_ as $}from"./DatePicker.vue_vue_type_script_setup_true_lang-qwdLkDCB.js";import{$ as M}from"./http-08Dy-572.js";import{d as S,r as i,f as N,ab as T,a as h,o as s,b as n,Y as y,Z as c,u as t,S as p,X as f,av as j,T as d,a2 as v,ao as q,b3 as F,aL as I,b4 as K,aK as O}from"./vsv-element-plus-uCf0_uY0.js";const P={class:"drawer-header"},U={class:"drawer-title"},X={class:"drawer-filter"},Z={style:{"padding-bottom":"20px"}},A={style:{"max-height":"calc(100vh - 160px)","overflow-y":"auto","overflow-x":"hidden"}},G={style:{"margin-top":"5px","word-break":"break-all"}},R=S({name:"CrontabLogs",__name:"CrontabLogs",props:{task:{type:Object,default:()=>({})}},setup(k){const m=k,l=i([]),_=i(!0),C=i("total, sizes, prev, pager, next, jumper"),u=i(0),e=N({page:1,size:10,type:"",day:Math.floor(Date.now()/1e3)}),b=a=>{e.page=1,e.size=a,r()},w=a=>{e.page=a,r()},r=async()=>{_.value=!0,e.type=m.task.namespace;const{data:a}=await M.get("/logs",e).finally(()=>{_.value=!1});l.value=a.list,u.value=a.total},x=async()=>{e.page=1,await r()};return T(async()=>{await r()}),(a,g)=>{const z=$,E=j,D=I,V=F,B=K,L=O;return s(),h(v,null,[n("div",P,[n("h4",U,y(m.task.name)+" - 运行日志",1),n("div",X,[c(z,{modelValue:t(e).day,"onUpdate:modelValue":g[0]||(g[0]=o=>t(e).day=o),placeholder:"选择日期",format:"YYYY-MM-DD",onChange:x},null,8,["modelValue"])])]),n("div",Z,[n("div",A,[t(l).length?f("",!0):(s(),p(E,{key:0,"image-size":150,description:"暂无运行日志"})),t(l).length?(s(),p(B,{key:1},{default:d(()=>[(s(!0),h(v,null,q(t(l),(o,Y)=>(s(),p(V,{placement:"top",timestamp:`${o.time||o.date}@${o.host||"master"}`,key:Y},{default:d(()=>[c(D,null,{default:d(()=>[n("p",G,y(o.message),1)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):f("",!0)]),c(L,{background:"","current-page":t(e).page,layout:t(C),"page-size":t(e).size,total:t(u),onCurrentChange:w,onSizeChange:b},null,8,["current-page","layout","page-size","total"])])],64)}}});export{R as _};
