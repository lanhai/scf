/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-09-23 21:12:46 
 */
import{_ as L}from"./DatePicker.vue_vue_type_script_setup_true_lang-B9ep57xE.js";import{$ as M}from"./http-CR9hvW_-.js";import{d as S,r as i,f as j,ab as N,a as h,o as s,b as n,Y as y,Z as c,u as t,S as p,X as f,bh as T,T as d,a2 as k,ap as q,bi as F,at as I,bj as O,as as P}from"./vsv-element-plus-Cu8LirE2.js";const U={class:"drawer-header"},X={class:"drawer-title"},Z={class:"drawer-filter"},A={style:{"padding-bottom":"20px"}},G={style:{"max-height":"calc(100vh - 160px)","overflow-y":"auto","overflow-x":"hidden"}},H={style:{"margin-top":"5px","word-break":"break-all"}},R=S({name:"CrontabLogs",__name:"CrontabLogs",props:{task:{type:Object,default:()=>({})}},setup(v){const m=v,l=i([]),_=i(!0),C=i("total, sizes, prev, pager, next, jumper"),u=i(0),e=j({page:1,size:10,type:"",day:Math.floor(Date.now()/1e3)}),b=a=>{e.page=1,e.size=a,r()},w=a=>{e.page=a,r()},r=async()=>{_.value=!0,e.type=m.task.namespace;const{data:a}=await M.get("/logs",e).finally(()=>{_.value=!1});l.value=a.list,u.value=a.total},x=async()=>{e.page=1,await r()};return N(async()=>{await r()}),(a,g)=>{const z=L,E=T,D=I,V=F,B=O,Y=P;return s(),h(k,null,[n("div",U,[n("h4",X,y(m.task.name)+" - 运行日志",1),n("div",Z,[c(z,{modelValue:t(e).day,"onUpdate:modelValue":g[0]||(g[0]=o=>t(e).day=o),placeholder:"选择日期",format:"YYYY-MM-DD",onChange:x},null,8,["modelValue"])])]),n("div",A,[n("div",G,[t(l).length?f("",!0):(s(),p(E,{key:0,"image-size":150,description:"暂无运行日志"})),t(l).length?(s(),p(B,{key:1},{default:d(()=>[(s(!0),h(k,null,q(t(l),(o,$)=>(s(),p(V,{placement:"top",timestamp:`${o.time||o.date}@${o.host||"master"}`,key:$},{default:d(()=>[c(D,null,{default:d(()=>[n("p",H,y(o.message),1)]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})):f("",!0)]),c(Y,{background:"","current-page":t(e).page,layout:t(C),"page-size":t(e).size,total:t(u),onCurrentChange:w,onSizeChange:b},null,8,["current-page","layout","page-size","total"])])],64)}}});export{R as _};
