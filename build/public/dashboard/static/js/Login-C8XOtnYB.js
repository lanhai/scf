/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-12-14 12:58:15 
 */
import C from"./LoginContainer-B-rUC0gD.js";import{d as F,r,f as v,ab as M,F as N,S as w,T as n,R as T,ag as U,o as g,b as c,Z as p,u as o,ah as A,ai as O,U as W,Y as f,aj as j,ak as Y,ad as Z,ac as z}from"./vsv-element-plus-uCf0_uY0.js";import{l as G}from"./left_img_1-CAoJdGg4.js";import{u as H,a as J,s as K,b as Q,o as X,i as ee,t as u,c as oe,_ as te}from"./index-DNMZU-TP.js";import{$ as h}from"./storage-Ctr7Qdao.js";import{$ as se}from"./http-LVUJO5_z.js";import"./bing-CgHSX_ml.js";import"./index.vue_vue_type_style_index_0_lang-BTWvdNgr.js";import"./vsv-icon-D20Jw_Ve.js";import"./vsv-nprogress-D-M_H-zP.js";const ae={class:"login-form"},re=["src"],ne={class:"title-tips"},le=F({name:"Login",__name:"Login",setup(ie){const m=oe(),_=Q(),y=H(),R=J(),{title:S}=K(R),b=t=>y.login(t),l=r(!1),i=r(void 0);r("https://www.oschina.net/action/user/captcha");const d=r(),k=r(),a=v({password:h.get("_PASSWORD_")||""}),x=v({password:[{required:!0,trigger:"blur",validator:(t,e,s)=>{ee(e)?s():s(new Error(u("密码不能少于6位")))}}]}),B=()=>i.value==="/404"||i.value==="/403"?"/":i.value,E=async()=>{var t;d.value&&((t=d.value)==null||t.validate(async e=>{if(e)try{l.value=!0,h.set("_PASSWORD_",a.password),await b({password:a.password}).catch(()=>{l.value=!1}),await _.push(B())}finally{l.value=!1}}))};return M(async()=>{const{data:t}=await se.get("/install_check",{timeout:12e4});parseInt(t)===0&&_.push({path:"/install",replace:!0}).then(()=>{})}),N(()=>{i.value=m.query&&m.query.redirect||"/"}),X((t,e,s)=>{s()}),(t,e)=>{const s=T("vab-icon"),V=Y,D=j,I=Z,L=A,P=C,$=U("throttle");return g(),w(P,null,{default:n(()=>[c("div",ae,[c("img",{alt:"",class:"left-img",src:o(G)},null,8,re),p(L,{ref_key:"formRef",ref:d,"label-position":"left",model:o(a),rules:o(x),onSubmit:e[1]||(e[1]=O(()=>{},["prevent"]))},{default:n(()=>[e[2]||(e[2]=c("div",{class:"title"},"hello !",-1)),c("div",ne,f(o(u)("欢迎来到"))+" "+f(o(S)),1),p(D,{prop:"password"},{default:n(()=>[p(V,{ref_key:"passwordRef",ref:k,modelValue:o(a).password,"onUpdate:modelValue":e[0]||(e[0]=q=>o(a).password=q),modelModifiers:{trim:!0},clearable:"",placeholder:o(u)("输入管理秘钥"),"show-password":"",type:"password",autocomplete:"off",rows:3},{prefix:n(()=>[p(s,{icon:"lock-line"})]),_:1},8,["modelValue","placeholder"])]),_:1}),W((g(),w(I,{class:"login-btn",loading:o(l),type:"primary"},{default:n(()=>[z(f(o(u)("登录")),1)]),_:1},8,["loading"])),[[$,E]])]),_:1},8,["model","rules"])])]),_:1})}}}),ye=te(le,[["__scopeId","data-v-86c3b669"]]);export{ye as default};
