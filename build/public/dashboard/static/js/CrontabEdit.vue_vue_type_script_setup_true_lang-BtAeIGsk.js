/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-09-24 18:24:09 
 */
import{$ as S}from"./http-CYih7GPk.js";import{l as D}from"./index-DAMf_qbB.js";import{d as L,r as v,S as f,o as p,T as l,b,Z as a,ah as O,u as o,aj as j,ac as n,Y as u,ax as z,am as G,bn as M,a as c,a2 as k,ap as x,aI as Q,n as Y,bm as Z,bl as q,ak as A,ad as H,i as J,Q as K,f as P}from"./vsv-element-plus-Cu8LirE2.js";const W={style:{"padding-bottom":"20px"}},ae=L({name:"CrontabEdit",__name:"CrontabEdit",setup(X,{expose:C}){const d=v(!1),_=v(!1),t=v({name:""}),w=[{value:"00:00",label:"00:00"},{value:"01:00",label:"01:00"},{value:"06:00",label:"06:00"},{value:"08:00",label:"08:00"},{value:"12:00",label:"12:00"},{value:"16:00",label:"16:00"},{value:"18:00",label:"18:00"},{value:"20:00",label:"20:00"},{value:"22:00",label:"22:00"},{value:"23:00",label:"23:00"}],$=async V=>{t.value=P({...V}),d.value=!0},B=async()=>{_.value=!0,await S.post("/crontab_override",t.value).finally(()=>{_.value=!1}),D("任务已保存","success","hey"),d.value=!1};return C({show:$}),(V,e)=>{const m=j,r=M,y=G,i=z,U=Q,T=q,F=Z,I=A,N=O,g=H,R=K;return p(),f(R,{modelValue:o(d),"onUpdate:modelValue":e[6]||(e[6]=s=>J(d)?d.value=s:null),"append-to-body":"",draggable:"",title:`${o(t).name} - 任务编辑`,width:"40%","close-on-click-modal":!1,"destroy-on-close":!0,"close-on-press-escape":!1},{footer:l(()=>[a(g,{onClick:e[4]||(e[4]=s=>d.value=!1)},{default:l(()=>e[12]||(e[12]=[n("取 消")])),_:1}),a(g,{type:"primary",onClick:e[5]||(e[5]=s=>B()),loading:o(_)},{default:l(()=>e[13]||(e[13]=[n("保 存")])),_:1},8,["loading"])]),default:l(()=>[b("div",W,[a(N,{model:o(t),"status-icon":"",ref:"form","label-width":"120px",class:""},{default:l(()=>[a(m,{label:"任务脚本：",prop:"namespace"},{default:l(()=>[n(u(o(t).namespace),1)]),_:1}),a(m,{label:"任务名称：",prop:"name"},{default:l(()=>[n(u(o(t).name),1)]),_:1}),a(m,{label:"执行方式：",prop:"mode"},{default:l(()=>[a(i,{span:24},{default:l(()=>[a(y,{modelValue:o(t).mode,"onUpdate:modelValue":e[0]||(e[0]=s=>o(t).mode=s)},{default:l(()=>[a(r,{value:1},{default:l(()=>[n("循环执行"+u(o(t).mode===1?"(默认)":""),1)]),_:1}),a(r,{value:3},{default:l(()=>[n("定时循环"+u(o(t).mode===3?"(默认)":""),1)]),_:1}),a(r,{value:2},{default:l(()=>[n("定时执行"+u(o(t).mode===2?"(默认)":""),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(t).mode===2?(p(),f(m,{key:0,label:"执行时间：",prop:"times"},{default:l(()=>[a(i,{span:24},{default:l(()=>[(p(!0),c(k,null,x(o(t).times,(s,E)=>(p(),f(U,{key:E,class:Y({"ml-5":E!==0})},{default:l(()=>[n(u(s),1)]),_:2},1032,["class"]))),128))]),_:1}),a(i,{span:24},{default:l(()=>[a(F,{style:{width:"400px"},modelValue:o(t).times,"onUpdate:modelValue":e[1]||(e[1]=s=>o(t).times=s),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"执行时间"},{default:l(()=>[(p(),c(k,null,x(w,s=>a(T,{key:s.value,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1})):(p(),f(m,{key:1,label:"间隔时间：",prop:"interval"},{default:l(()=>[a(i,{span:5},{default:l(()=>[a(I,{type:"number",placeholder:"单位:秒",modelValue:o(t).interval,"onUpdate:modelValue":e[2]||(e[2]=s=>o(t).interval=s)},{default:l(()=>e[7]||(e[7]=[b("template",{slot:"append"},[n("秒")],-1)])),_:1},8,["modelValue"]),e[8]||(e[8]=n(" 默认:")),b("b",null,u(o(t).interval),1),e[9]||(e[9]=n("秒 "))]),_:1})]),_:1})),a(m,{label:"任务状态：",prop:"status"},{default:l(()=>[a(y,{modelValue:o(t).status,"onUpdate:modelValue":e[3]||(e[3]=s=>o(t).status=s)},{default:l(()=>[a(r,{value:1},{default:l(()=>e[10]||(e[10]=[n("开启")])),_:1}),a(r,{value:0},{default:l(()=>e[11]||(e[11]=[n("关闭")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])}}});export{ae as _};
