/*!  build: Vue Shop Vite 
     copyright: https://vuejs-core.cn/shop-vite   
     time: 2025-11-05 21:04:18 
 */
import{_ as _e}from"./index.vue_vue_type_style_index_0_lang-BvTCZvqC.js";import{$ as j}from"./http-08Dy-572.js";import{J as T}from"./vue-json-viewer-DM_rPkw2.js";import{$}from"./storage-Ctr7Qdao.js";import{$ as fe,_ as ye}from"./index-DMkebb7r.js";import{d as ve,r as v,f as be,ab as ge,a as V,Z as e,T as a,al as ce,R as Ve,o as n,am as ke,b as u,an as he,i as O,u as d,a2 as L,ao as z,S as i,ap as we,aq as Ue,ar as Ee,as as xe,at as qe,ac as f,Y as b,au as Pe,av as Ce,X as E,aw as $e,ax as De,ay as Be,ak as Te,ah as Ae,az as Me,aA as je,aB as Re,aj as Ie,ad as Se,aC as Ge,aD as Oe,aE as Le}from"./vsv-element-plus-uCf0_uY0.js";import"./vsv-icon-D20Jw_Ve.js";import"./vsv-nprogress-D-M_H-zP.js";const ze={class:"common-layout"},Ne={style:{position:"absolute",right:"20px",top:"5px"}},Ye={class:"no-background-container"},Fe={key:1},Je={class:"description mt-15"},Ke={class:"description mt-15"},He={key:1},We={key:1},Xe={key:1},Ze={key:1},Qe={class:"description"},ea={class:"description"},aa={class:"description mt-10"},la={class:"description mt-10"},ta={class:"description mt-10"},da={class:"description mt-10"},oa={class:"mt-20"},ua={key:1,class:"mt-20"},na=ve({name:"ApiWs",__name:"ws",setup(sa){const A=v({gateway:{dev:"",produce:""},header:[]}),N=v(null),o=v({path_params:{},query_params:{},body_params:{},debug_appid:$.get("_DEBUG_APPID_")||"",debug_appkey:$.get("_DEBUG_APPKEY_")||"",debug_mpappid:$.get("_DEBUG_MPAPPID_")||""}),h=v(!0),M=v([]),x=v([]),U=v(0),R=v("biz"),I=v("request"),m=v({}),D=v(null),S=v({}),Y=async()=>{h.value=!0;const{data:y}=await j.get("/ws_document",{action:"document"},1e3*310).finally(()=>{h.value=!1});y.modules.length&&(M.value=y.modules,A.value=y.debug,U.value=0,x.value=M.value[0].children)},W=be({name:[{required:!0,trigger:"blur",message:"请输入业务名称"}],params:[{required:!0,trigger:"blur",message:"请设置任务参数"}]}),X=y=>{U.value!==y.props.name&&(U.value=y.props.name,x.value=M.value[U.value].children,m.value=x.value[0].routes[0],D.value=null)},Z=(y,t)=>{},Q=(y,t)=>{},ee=y=>{o.value.path_params={},o.value.query_params={},o.value.body_params={},m.value=y,D.value=null},w=v(""),ae=async()=>{N.value.validate(async y=>{if(y){const t=Object.keys(o.value.path_params);w.value=fe(m.value.route),t.length&&t.forEach(g=>{w.value=w.value.replace(g,o.value.path_params[g])}),h.value=!0;const k=await j.post("/ws_sign_debug",{appid:o.value.debug_appid,appkey:o.value.debug_appkey,path:w.value,query:o.value.query_params,body:o.value.body_params},1e3*310).finally(()=>{h.value=!1});S.value=k.data,o.value.debug_appid&&$.set("_DEBUG_APPID_",o.value.debug_appid),o.value.debug_appkey&&$.set("_DEBUG_APPKEY_",o.value.debug_appkey),o.value.debug_mpappid&&$.set("_DEBUG_MPAPPID_",o.value.debug_mpappid),h.value=!0;const q=S.value;let B;m.value.method=="POST"?(o.value.query_params&&(w.value+="?"+Object.keys(o.value.query_params).map(g=>g+"="+o.value.query_params[g]).join("&")),B=await j.post(w.value,o.value.body_params,1e3*60,q).finally(()=>{h.value=!1}).catch(g=>g)):B=await j.get(w.value,o.value.query_params,1e3*60,q).finally(()=>{h.value=!1}).catch(g=>g),D.value=B}})};return ge(async()=>{await Y(),x.value.length&&(m.value=x.value[0].routes[0])}),(y,t)=>{const k=we,q=he,B=_e,g=ke,le=qe,te=xe,de=Ee,oe=Ue,ue=Ce,ne=Ve("vab-icon"),r=De,c=$e,se=Be,_=Te,p=je,P=Re,G=Ie,C=Me,pe=Se,F=Ge,re=Ae,J=Oe,me=Pe,K=ce;return n(),V("div",ze,[e(K,null,{default:a(()=>[e(g,null,{default:a(()=>[e(q,{"tab-position":"top",modelValue:d(U),"onUpdate:modelValue":t[0]||(t[0]=l=>O(U)?U.value=l:null),class:"demo-tabs",onTabClick:X},{default:a(()=>[(n(!0),V(L,null,z(d(M),(l,s)=>(n(),i(k,{label:l.name,name:s,data:s},null,8,["label","name","data"]))),256))]),_:1},8,["modelValue"]),u("div",Ne,[e(B,{style:{marginLeft:"var(--el-margin)"}})])]),_:1}),e(K,null,{default:a(()=>[e(oe,{width:"200px"},{default:a(()=>[e(de,{class:"el-menu-vertical-demo",onOpen:Z,onClose:Q,"default-openeds":["1"],"default-active":"1-1"},{default:a(()=>[(n(!0),V(L,null,z(d(x),(l,s)=>(n(),i(te,{index:(s+1).toString()},{title:a(()=>[u("span",null,b(l.name),1)]),default:a(()=>[(n(!0),V(L,null,z(l.routes,(H,ie)=>(n(),i(le,{index:`${s+1}-${ie+1}`,onClick:pa=>ee(H)},{default:a(()=>[f(b(H.label),1)]),_:2},1032,["index","onClick"]))),256))]),_:2},1032,["index"]))),256))]),_:1})]),_:1}),e(me,null,{default:a(()=>[u("div",Ye,[d(m).label?(n(),V("div",Fe,[u("div",null,[e(c,null,{default:a(()=>[u("span",null,[t[9]||(t[9]=f("接口说明 ")),e(ne,{icon:"refresh-line",onClick:t[1]||(t[1]=l=>Y())})]),e(r,{span:24},{default:a(()=>[u("div",Je,b(d(m).explain||"暂无说明"),1)]),_:1})]),_:1}),e(c,{class:"mt-20"},{default:a(()=>[u("span",null,[e(se,{type:"primary"},{default:a(()=>t[10]||(t[10]=[f("花括号包裹的内容为path参数,需替换为实际值后参与签名数据拼接")])),_:1}),f(","+b(`请求地址:开发环境:${d(A).gateway.dev} 正式环境:${d(A).gateway.produce}`),1)]),e(r,{span:24},{default:a(()=>[u("div",Ke,[e(_,{modelValue:d(m).route,"onUpdate:modelValue":t[2]||(t[2]=l=>d(m).route=l),placeholder:"接口路径"},{prepend:a(()=>[u("b",null,b(d(m).method),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1}),e(re,{ref_key:"formRef",ref:N,"label-width":"1px",model:d(o),rules:d(W)},{default:a(()=>[e(q,{modelValue:d(R),"onUpdate:modelValue":t[7]||(t[7]=l=>O(R)?R.value=l:null),class:"mt-15"},{default:a(()=>[e(k,{label:"业务参数",name:"biz"},{default:a(()=>[e(c,null,{default:a(()=>[d(m).path_params.length?(n(),i(r,{key:0,span:24},{default:a(()=>[t[14]||(t[14]=u("h4",null,"Path参数",-1)),e(C,{data:d(m).path_params,border:"",style:{width:"100%"},"row-key":"key","default-expand-all":""},{default:a(()=>[e(p,{prop:"key",label:"参数名",width:"200"},{default:a(({row:l})=>[u("span",null,b(l.name),1)]),_:1}),e(p,{prop:"type",label:"类型",width:"150"}),e(p,{prop:"required",label:"必填",width:"100"},{default:a(({row:l})=>[l.required===1?(n(),i(P,{key:0,type:"success"},{default:a(()=>t[11]||(t[11]=[f(" 是 ")])),_:1})):(n(),i(P,{key:1,type:"info"},{default:a(()=>t[12]||(t[12]=[f(" 否 ")])),_:1}))]),_:1}),e(p,{prop:"desc",label:"参数说明"}),e(p,{prop:"default",label:"缺省值",width:"100"},{default:a(({row:l})=>[u("span",null,b(l.default||"--"),1)]),_:1}),e(p,{prop:"value",label:"调试值",width:"350"},{header:a(()=>t[13]||(t[13]=[u("span",null,"调试值",-1)])),default:a(({row:l})=>[e(c,{gutter:10},{default:a(()=>[e(r,{span:15},{default:a(()=>[e(G,{label:"",prop:`path_params.${l.name}`,rules:{required:!0,trigger:"blur",message:"请填写参数值"}},{default:a(()=>[e(_,{modelValue:d(o).path_params[l.name],"onUpdate:modelValue":s=>d(o).path_params[l.name]=s,placeholder:"调试值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})):E("",!0),d(m).get.length?(n(),i(r,{key:1,span:24},{default:a(()=>[t[18]||(t[18]=u("h4",null,"URL参数",-1)),e(C,{data:d(m).get,border:"",style:{width:"100%"},"row-key":"key","default-expand-all":""},{default:a(()=>[e(p,{prop:"key",label:"参数名",width:"200"},{default:a(({row:l})=>[l.temp==1?(n(),i(_,{key:0,modelValue:l.key,"onUpdate:modelValue":s=>l.key=s,placeholder:"参数名称"},null,8,["modelValue","onUpdate:modelValue"])):(n(),V("span",He,b(l.name),1))]),_:1}),e(p,{prop:"type",label:"类型",width:"150"}),e(p,{prop:"required",label:"必填",width:"100"},{default:a(({row:l})=>[l.required==1?(n(),i(P,{key:0,type:"success"},{default:a(()=>t[15]||(t[15]=[f(" 是 ")])),_:1})):(n(),i(P,{key:1,type:"info"},{default:a(()=>t[16]||(t[16]=[f(" 否 ")])),_:1}))]),_:1}),e(p,{prop:"desc",label:"参数说明"}),e(p,{prop:"default",label:"缺省值",width:"100"},{default:a(({row:l})=>[u("span",null,b(l.default||"--"),1)]),_:1}),e(p,{prop:"value",label:"调试值",width:"350"},{header:a(()=>t[17]||(t[17]=[u("span",null,"调试值",-1)])),default:a(l=>[e(c,{gutter:10},{default:a(()=>[l.row.type==="array"?(n(),i(r,{key:0,span:15},{default:a(()=>[e(_,{modelValue:l.row.value[0],"onUpdate:modelValue":s=>l.row.value[0]=s,placeholder:"调试值"},null,8,["modelValue","onUpdate:modelValue"]),e(_,{modelValue:l.row.value[1],"onUpdate:modelValue":s=>l.row.value[1]=s,placeholder:"调试值",class:"mt-10"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.row.type==="object"?(n(),V("span",We,"--")):(n(),i(r,{key:2,span:15},{default:a(()=>[e(G,{label:"",prop:`query_params.${l.row.name}`,rules:{required:l.row.required==1,trigger:"blur",message:"请填写参数值"}},{default:a(()=>[e(_,{modelValue:d(o).query_params[l.row.name],"onUpdate:modelValue":s=>d(o).query_params[l.row.name]=s,placeholder:"调试值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024))]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})):E("",!0),d(m).post.length?(n(),i(r,{key:2,span:24},{default:a(()=>[t[22]||(t[22]=u("h4",null,"POST参数",-1)),e(C,{data:d(m).post,border:"",style:{width:"100%"},"row-key":"key","default-expand-all":""},{default:a(()=>[e(p,{prop:"key",label:"参数名",width:"200"},{default:a(({row:l})=>[l.temp==1?(n(),i(_,{key:0,modelValue:l.key,"onUpdate:modelValue":s=>l.key=s,placeholder:"参数名称"},null,8,["modelValue","onUpdate:modelValue"])):(n(),V("span",Xe,b(l.name),1))]),_:1}),e(p,{prop:"type",label:"类型",width:"150"}),e(p,{prop:"required",label:"必填",width:"100"},{default:a(({row:l})=>[l.required==1?(n(),i(P,{key:0,type:"success"},{default:a(()=>t[19]||(t[19]=[f(" 是 ")])),_:1})):(n(),i(P,{key:1,type:"info"},{default:a(()=>t[20]||(t[20]=[f(" 否 ")])),_:1}))]),_:1}),e(p,{prop:"desc",label:"参数说明"}),e(p,{prop:"default",label:"缺省值",width:"100"},{default:a(({row:l})=>[u("span",null,b(l.default||"--"),1)]),_:1}),e(p,{prop:"value",label:"调试值",width:"350"},{header:a(()=>t[21]||(t[21]=[u("span",null,"调试值",-1)])),default:a(l=>[e(c,{gutter:10},{default:a(()=>[l.row.type==="array"?(n(),i(r,{key:0,span:15},{default:a(()=>[e(_,{modelValue:l.row.value[0],"onUpdate:modelValue":s=>l.row.value[0]=s,placeholder:"调试值"},null,8,["modelValue","onUpdate:modelValue"]),e(_,{modelValue:l.row.value[1],"onUpdate:modelValue":s=>l.row.value[1]=s,placeholder:"调试值",class:"mt-10"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):l.row.type==="object"?(n(),V("span",Ze,"--")):(n(),i(r,{key:2,span:15},{default:a(()=>[e(G,{label:"",prop:`body_params.${l.row.name}`,rules:{required:l.row.required==1,trigger:"blur",message:"请填写参数值"}},{default:a(()=>[e(_,{modelValue:d(o).body_params[l.row.name],"onUpdate:modelValue":s=>d(o).body_params[l.row.name]=s,placeholder:"调试值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024))]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})):E("",!0),e(r,{span:24,class:"mt-10"},{default:a(()=>[e(pe,{type:"primary",class:"fr",onClick:t[3]||(t[3]=l=>ae()),loading:d(h)},{default:a(()=>t[23]||(t[23]=[f(" 调试 ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(k,{label:"header参数",name:"header"},{default:a(()=>[e(c,null,{default:a(()=>[e(r,{span:24},{default:a(()=>[e(F,{title:"header参数调试时会根据填写的签名参数自动完成签名后赋值,生产环境请参考文档进行相关基础参数拼接以及签名赋值,调试值支持变量: {rand}:16位随机字符串;{timestamp}:10位当前时间戳;{appid}:调试appid;{sign}:调试自动签名","show-icon":"",closable:!1,type:"info"})]),_:1}),e(r,{span:24,class:"mt-10"},{default:a(()=>[e(C,{data:d(A).header,border:"",style:{width:"100%"}},{default:a(()=>[e(p,{prop:"key",label:"参数名",width:"180"},{default:a(({row:l})=>[e(_,{modelValue:l.key,"onUpdate:modelValue":s=>l.key=s,placeholder:"参数名称"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(p,{prop:"label",label:"说明"}),e(p,{prop:"value",label:"参数值"},{header:a(()=>t[24]||(t[24]=[u("span",null,"参数值",-1)])),default:a(({row:l})=>[e(c,{gutter:10},{default:a(()=>[e(r,{span:10},{default:a(()=>[e(_,{modelValue:l.value,"onUpdate:modelValue":s=>l.value=s,placeholder:"参数值"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e(k,{label:"调试配置",name:"sign"},{default:a(()=>[e(c,{gutter:20},{default:a(()=>[e(r,{span:8},{default:a(()=>[e(_,{placeholder:"调试appid",modelValue:d(o).debug_appid,"onUpdate:modelValue":t[4]||(t[4]=l=>d(o).debug_appid=l)},{prepend:a(()=>t[25]||(t[25]=[f(" APPID ")])),_:1},8,["modelValue"])]),_:1}),e(r,{span:8},{default:a(()=>[e(_,{placeholder:"调试appkey",modelValue:d(o).debug_appkey,"onUpdate:modelValue":t[5]||(t[5]=l=>d(o).debug_appkey=l)},{prepend:a(()=>t[26]||(t[26]=[f(" APPKEY ")])),_:1},8,["modelValue"])]),_:1}),e(r,{span:8},{default:a(()=>[e(_,{placeholder:"小程序appid",modelValue:d(o).debug_mpappid,"onUpdate:modelValue":t[6]||(t[6]=l=>d(o).debug_mpappid=l)},{prepend:a(()=>t[27]||(t[27]=[f(" 小程序appid ")])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"]),d(D)?(n(),i(q,{key:0,modelValue:d(I),"onUpdate:modelValue":t[8]||(t[8]=l=>O(I)?I.value=l:null),class:"mt-15"},{default:a(()=>[e(k,{label:"响应数据",name:"request"},{default:a(()=>[e(r,{span:24},{default:a(()=>[u("div",Qe,[e(d(T),{value:d(D),"expand-depth":10,copyable:"",expanded:""},null,8,["value"])])]),_:1})]),_:1}),e(k,{label:"请求参数",name:"response"},{default:a(()=>[u("div",ea,b(d(w)),1),e(r,{span:24},{default:a(()=>[t[28]||(t[28]=u("span",null,"path",-1)),u("div",aa,[e(d(T),{value:d(o).path_params,"expand-depth":10,copyable:"",expanded:""},null,8,["value"])])]),_:1}),e(r,{span:24},{default:a(()=>[t[29]||(t[29]=u("span",null,"query",-1)),u("div",la,[e(d(T),{value:d(o).query_params,"expand-depth":10,copyable:"",expanded:""},null,8,["value"])])]),_:1}),e(r,{span:24},{default:a(()=>[t[30]||(t[30]=u("span",null,"body",-1)),u("div",ta,[e(d(T),{value:d(o).body_params,"expand-depth":10,copyable:"",expanded:""},null,8,["value"])])]),_:1})]),_:1}),e(k,{label:"请求header",name:"header"},{default:a(()=>[e(r,{span:24},{default:a(()=>[u("div",da,[e(d(T),{value:d(S),"expand-depth":10,copyable:"",expanded:""},null,8,["value"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])):E("",!0),u("div",oa,[t[31]||(t[31]=u("span",null,"响应说明",-1)),e(J),e(F,{title:"请求成功(状态码200)时响应json格式字符串数据,包含data,errCode,message,其中data字段数据类型可能是object/array/string/int其中的一种(float当做string返回)","show-icon":"",closable:!1,type:"info"}),e(c,{class:"mt-20"},{default:a(()=>[d(m).result.length?(n(),i(r,{key:0,span:24},{default:a(()=>[e(C,{data:d(m).result,border:"",style:{width:"100%"},"row-key":"_index","default-expand-all":""},{default:a(()=>[e(p,{prop:"name",label:"字段名称",width:"350"},{default:a(({row:l})=>[u("span",{style:Le({"margin-left":l.level*20+"px"})},b(l.name),5)]),_:1}),e(p,{prop:"type",label:"数据类型",width:"180"}),e(p,{prop:"desc",label:"字段说明"})]),_:1},8,["data"])]),_:1})):E("",!0)]),_:1})]),d(m).errcode&&d(m).errcode.length?(n(),V("div",ua,[t[32]||(t[32]=u("span",null,"错误码[errCode]",-1)),e(J),e(c,{class:"mt-20"},{default:a(()=>[d(m).errcode?(n(),i(r,{key:0,span:24},{default:a(()=>[e(C,{data:d(m).errcode,border:"",style:{width:"100%"},"row-key":"_index","default-expand-all":""},{default:a(()=>[e(p,{prop:"code",label:"错误码",width:"200"}),e(p,{prop:"desc",label:"说明"})]),_:1},8,["data"])]),_:1})):E("",!0)]),_:1})])):E("",!0)])])):(n(),i(ue,{key:0,description:"请选择接口"}))])]),_:1})]),_:1})]),_:1})])}}}),ga=ye(na,[["__scopeId","data-v-08d8eabd"]]);export{ga as default};
