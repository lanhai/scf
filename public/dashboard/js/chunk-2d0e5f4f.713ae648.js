(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e5f4f"],{9761:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("div",{staticClass:"login-con"},[s("p",{staticClass:"c-FE mt-15 fs-16 mb-20"},[t._v("SCF·应用安装")]),s("div",{staticClass:"width374"},[s("div",[s("el-col",{attrs:{span:24}},[s("el-input",{attrs:{placeholder:"请输入安装秘钥","prefix-icon":"el-icon-key",type:"textarea",rows:12},model:{value:t.input.key,callback:function(e){t.$set(t.input,"key",e)},expression:"input.key"}})],1),s("el-col",{staticClass:"mt-10",attrs:{span:24}},[s("el-button",{staticClass:"login-button",attrs:{type:"primary",loading:t.isLoading},on:{click:function(e){return t.install()}}},[t._v(t._s(t.text))])],1)],1)])])])},i=[],o={name:"Install",data:function(){return{isLoading:!1,text:"安装",input:{key:this.$cookie.get("_DASHBOARD_INSTALL_KEY_")||""},password:""}},methods:{install:function(){var t=this;this.isLoading=!0,this.$request.post("/install",this.$copy(this.input)).then((function(e){if(e.errCode){if("APP_INSTALLED"===e.errCode)return void t.$router.push("/login");t.$message.error(e.message),t.isLoading=!1}else t.$cookie.set("_DASHBOARD_INSTALL_KEY_",t.input.key),t.text="等待安装完成",t.check(),t.password=e.data.password,t.$cookie.set("_DASHBOARD_PASSWORD_",t.password)})).catch((function(e){t.$message.error(e)}))},copy:function(t){var e=t,s=document.createElement("input");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("Copy"),this.$message.success("管理密码已复制到粘贴板,清妥善保存"),s.remove()},check:function(){var t=this;this.$request.get("/check",{timeout:3e3}).then((function(e){"APP_NOT_INSTALL_YET"!==e.errCode?(t.isLoading=!1,t.$message.alert({title:"安装完成,清使用以下密码登录仪表盘管理",content:"<strong>".concat(t.password,"</strong>"),confirmButtonText:"复制密码"},(function(){t.copy(t.password),setTimeout((function(){t.$router.push("/login")}),1e3)}))):setTimeout((function(){t.check()}),5e3)})).catch((function(e){t.$message.warning(e),setTimeout((function(){t.check()}),5e3)}))}}},a=o,c=s("2877"),r=Object(c["a"])(a,n,i,!1,null,"22ffda83",null);e["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2d0e5f4f.713ae648.js.map